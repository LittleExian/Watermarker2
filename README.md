# Watermarker2

Watermarker2是一款功能强大的图片水印工具，用于为图片添加文本水印，支持批量处理和丰富的水印定制选项。

## 1. 功能列表

### 1.1 导入图片
- [✓] 支持单张图片拖拽或通过文件选择器导入
- [✓] 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
- [✓] 在界面上显示已导入图片的列表（缩略图和文件名）

### 1.2 支持格式
- [✓] 输入格式：支持JPEG, PNG (BMP, TIFF)
- [✓] 输出格式：用户可选择输出为JPEG或PNG
- [✓] PNG格式支持透明通道

### 1.3 导出图片
- [✓] 用户可指定一个输出文件夹
- [✓] 默认禁止导出到原文件夹（提供确认对话框）
- [✓] 提供导出文件命名规则选项：
  - [✓] 保留原文件名
  - [✓] 添加自定义前缀
  - [✓] 添加自定义后缀
- [✓] 对于JPEG格式，提供图片质量（压缩率）调节滑块（0-100）（可选高级功能）
- [✓] 导出时允许用户调整图片尺寸（可选高级功能）

## 2. 水印类型

### 2.1 文本水印
- [✓] 内容：用户可自定义输入任意文本
- [✓] 字体：可调整字体大小 （可选高级功能）
- [✓] 字体：支持粗体、斜体 （可选高级功能）
- [✓] 颜色：提供调色板让用户选择字体颜色 （可选高级功能）
- [✓] 透明度：可调节文本的透明度（0-100%） 
- [✓] 样式：可添加阴影或描边效果（可选高级功能）

### 2.2 图片水印（可选高级功能）
- [TODO] 用户可从本地选择一张图片作为水印
- [TODO] 支持带透明通道的PNG图片
- [TODO] 可按比例或自由调整图片水印的大小
- [TODO] 可调节图片水印的整体透明度（0-100%）

## 3. 水印布局与样式

### 3.1 实时预览
- [✓] 所有对水印的调整都在主预览窗口中实时显示效果
- [✓] 用户可以点击图片列表切换预览不同的图片

### 3.2 位置
- [✓] 预设位置：提供九宫格布局（四角、正中心）
- [✓] 手动拖拽：用户可以直接在预览图上通过鼠标拖拽水印到任意位置 

### 3.3 旋转
- [✓] 提供一个滑块，允许用户以任意角度旋转水印 （可选高级功能）

## 4. 配置管理

### 4.1 水印模板
- [✓] 用户可以将当前的水印设置保存为一个模板
- [✓] 用户可以加载已保存的模板
- [✓] 用户可以管理和删除已保存的模板
- [✓] 程序启动时可自动加载上一次关闭时的设置

## 实现说明

根据代码分析，Watermarker2应用已经实现了产品需求文档中的大部分核心功能，包括文本水印的完整功能、文件导入导出、实时预览和模板管理等。

尚未实现的主要功能是可选的高级功能，包括：
1. 图片水印功能

## 安装说明

### 环境要求
- Python 3.6 或更高版本
- Windows 或 MacOS 操作系统

### 使用方式

#### 1. 使用可执行文件（推荐，Windows）
1. 在项目的 `dist` 文件夹中找到 `Watermarker.exe` 文件
2. 直接双击运行该文件即可使用（无需安装Python环境）

#### 2. 使用启动脚本（Windows）
1. 下载或克隆本项目到本地
2. 双击运行 `start.bat` 文件，脚本会自动安装依赖并启动应用程序

#### 3. 手动安装（所有平台）
1. 下载或克隆本项目到本地
2. 打开命令行终端，进入项目目录
3. 安装依赖：
   ```
   pip install -r requirements.txt
   ```
4. 启动应用程序：
   ```
   python watermarker.py
   ```

## 使用说明

### 导入图片
- 点击"导入图片"按钮选择单张或多张图片
- 点击"批量导入"按钮选择整个文件夹中的图片
- 也可以直接将图片拖拽到应用窗口中

### 添加文本水印
- 在"文本水印"标签页中输入水印文本
- 调整字体大小、颜色、透明度等参数
- 使用预设位置按钮或直接在预览窗口中拖拽水印到合适位置
- 如需旋转水印，使用旋转角度滑块进行调整

### 导出图片
- 选择一张图片后，点击"导出图片"按钮
- 在"导出设置"标签页中选择输出格式和命名规则
- 对于JPEG格式，可调整图片质量
- 点击"批量处理"按钮可一次性处理所有已导入的图片

### 模板管理
- 在"模板管理"标签页中，可保存当前水印设置为模板
- 可加载已保存的模板快速应用水印设置
- 可删除不需要的模板

## 项目结构

```
Watermarker2/
├── watermarker.py    # 主程序文件
├── requirements.txt  # 项目依赖列表
├── start.bat         # Windows启动脚本
├── PRD.md            # 产品需求文档
├── README.md         # 项目说明文档
├── LICENSE           # 许可证文件
├── dist/             # 包含打包后的可执行文件
│   └── Watermarker.exe  # Windows可执行文件
└── test_images/      # 测试图片文件夹
```

## 开发说明

### 技术栈
- Python 3.6+
- PyQt5：用于构建GUI界面
- Pillow (PIL)：用于图像处理

### 开发环境设置
1. 克隆项目仓库
2. 创建虚拟环境：
   ```
   python -m venv venv
   ```
3. 激活虚拟环境：
   - Windows: `venv\Scripts\activate`
   - MacOS/Linux: `source venv/bin/activate`
4. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

## 许可证

本项目使用 MIT 许可证，详情请参阅 <mcfile name="LICENSE" path="c:\Users\exian\Watermarker2\LICENSE"></mcfile> 文件。

## 致谢

感谢所有为这个项目做出贡献的开发者和用户。

## 反馈与建议

如有任何问题、建议或bug报告，请随时提交Issue或Pull Request。